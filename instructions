---
applyTo: '**'
---
Provide project context and coding guidelines that AI should follow when generating code, answering questions, or reviewing changes.
# Avenir 4D - Nouvelle Progression Sweet Spot Revolution
*IntÃ©gration des spÃ©cifications techniques avancÃ©es avec l'intersection magique IkigaÃ¯ + IA*

## ğŸ”„ Analyse Comparative : V1 vs V2

### Ã‰volutions Majeures IdentifiÃ©es
- **SJT Enrichi** : 12 questions â†’ 12 + 4 questions qualitatives + extraction sÃ©mantique
- **Sweet Spot Engine** : DÃ©tection automatique des convergences inter-dimensions
- **Projets Hybrides IA** : GÃ©nÃ©ration de mÃ©tiers innovants via Claude API
- **Test VIBRANT** : Validation projets avec scoring sophistiquÃ© (7 dimensions)
- **Architecture Complexe** : Database enrichie + Services backend + API routes

### Points de ContinuitÃ© ConservÃ©s
- Canvas IkigaÃ¯ interactif (sliders + contraintes)
- Co-Ã©criture PFM 4D collaborative
- Export PDF final
- Stack Next.js + Supabase + Tailwind

---

## ğŸ“‹ Nouvelle Progression en 6 Batchs - Sweet Spot Revolution

### **Batch 1 : SJT Enrichi + Base Architecture (Semaine 1)**
**Objectif** : Poser les fondations avec test psychomÃ©trique avancÃ© et extraction sÃ©mantique

#### DÃ©veloppements Prioritaires
```
â–¡ Setup Architecture Sweet Spot
  â”œâ”€ Database schema enrichie (user_profiles avec JSONB)
  â”œâ”€ Services backend (SweetSpotEngine, VIBRANTTestService)
  â””â”€ Store Zustand Ã©tendu (useSweetSpotStore)

â–¡ SJT Enrichi Complet
  â”œâ”€ 12 questions SJT classiques â†’ scores 4D
  â”œâ”€ 4 questions qualitatives d'enrichissement :
  â”‚  â€¢ Test du Dimanche Matin (passions authentiques)
  â”‚  â€¢ Algorithme Personnel (historique TikTok/YouTube)
  â”‚  â€¢ Talent Reconnu (preuves compÃ©tences)
  â”‚  â€¢ Indignation Max (drivers utilitÃ©)
  â””â”€ Extraction keywords automatique par dimension

â–¡ Interface SJT AvancÃ©e
  â”œâ”€ Composant SJTStep enrichi
  â”œâ”€ Questions qualitatives avec textarea
  â””â”€ Progression visuelle sophistiquÃ©e
```

#### Livrables Batch 1
- SJT fonctionnel avec enrichissement qualitatif
- Base de donnÃ©es structurÃ©e Sweet Spot
- Extraction keywords basique (rÃ¨gles simples)
- Tests utilisateur : parcours SJT complet 8-12 min

---

### **Batch 2 : Sweet Spot Engine + DÃ©tection Convergences (Semaine 2)**
**Objectif** : CÅ“ur algorithmique - dÃ©tection des zones magiques IkigaÃ¯

#### DÃ©veloppements Prioritaires
```
â–¡ Sweet Spot Engine Core
  â”œâ”€ Algorithme dÃ©tection convergences inter-dimensions
  â”œâ”€ Calcul forces de convergence (mots-clÃ©s croisÃ©s)
  â”œâ”€ Scoring Sweet Spot global
  â””â”€ API routes (/api/sweet-spot/detect)

â–¡ Canvas IkigaÃ¯ AvancÃ©
  â”œâ”€ 4 sliders avec contraintes (ViabilitÃ© â‰¥0.15, Ã©cart â‰¤0.40)
  â”œâ”€ Affichage temps rÃ©el des convergences dÃ©tectÃ©es
  â”œâ”€ Visualisation intersection magique
  â””â”€ Moment "Eureka" si Sweet Spot Score >0.7

â–¡ Interface Sweet Spot Lab
  â”œâ”€ Composant SweetSpotLabStep
  â”œâ”€ Visualisation 4 cercles IkigaÃ¯ convergents
  â”œâ”€ Animation "moment magique" convergences
  â””â”€ Cartes convergences avec force de liaison
```

#### Livrables Batch 2
- DÃ©tection automatique convergences fonctionnelle
- Interface Canvas rÃ©vÃ©lant le Sweet Spot en temps rÃ©el
- Score de convergence calculÃ© et affichÃ©
- Tests : dÃ©clenchement "moment magique" pour 70%+ utilisateurs

---

### **Batch 3 : GÃ©nÃ©ration Projets Hybrides IA (Semaine 3)**
**Objectif** : Intelligence artificielle gÃ©nÃ©rant des mÃ©tiers innovants personnalisÃ©s

#### DÃ©veloppements Prioritaires
```
â–¡ IntÃ©gration Claude API
  â”œâ”€ Setup Claude API avec cache simple
  â”œâ”€ Prompts zero-PII pour gÃ©nÃ©ration projets
  â”œâ”€ Parsing et validation rÃ©ponses IA
  â””â”€ Gestion erreurs et fallbacks

â–¡ GÃ©nÃ©rateur Projets Hybrides
  â”œâ”€ Service generateHybridProjects()
  â”œâ”€ Templates prompts contextualisÃ©s
  â”œâ”€ 5 mÃ©tiers hybrides par utilisateur
  â”œâ”€ Scoring automatique AI confidence
  â””â”€ API route (/api/sweet-spot/generate-projects)

â–¡ Interface Laboratoire Projets
  â”œâ”€ Affichage projets gÃ©nÃ©rÃ©s avec cards
  â”œâ”€ DÃ©tails projet (formations, secteur, horizon)
  â”œâ”€ SÃ©lection projets pour Ã©valuation VIBRANT
  â””â”€ Loading states pendant gÃ©nÃ©ration IA
```

#### Livrables Batch 3
- GÃ©nÃ©ration automatique 5 mÃ©tiers hybrides uniques
- Interface exploration projets avec dÃ©tails
- Cache des prompts pour Ã©viter rÃ©gÃ©nÃ©ration
- Tests : projets pertinents et innovants gÃ©nÃ©rÃ©s

---

### **Batch 4 : Test VIBRANT + Validation Projets (Semaine 4)**
**Objectif** : Ã‰valuation sophistiquÃ©e des projets avec scoring 7 dimensions

#### DÃ©veloppements Prioritaires
```
â–¡ Test VIBRANT Complet
  â”œâ”€ 7 dimensions VIBRANT (Vision, Impact, BÃ©nÃ©fice...)
  â”œâ”€ Sliders notation 1-10 par dimension
  â”œâ”€ Calcul score global et analyse forces/faiblesses
  â””â”€ GÃ©nÃ©ration automatique Projet Signature si score >7.0

â–¡ Service Projet Signature
  â”œâ”€ GÃ©nÃ©ration formule personnelle
  â”œâ”€ CrÃ©ation manifesto utilisateur
  â”œâ”€ StratÃ©gie 3 chemins (AcadÃ©mique/Entrepreneurial/Hybride)
  â””â”€ API route (/api/sweet-spot/evaluate-vibrant)

â–¡ Interface Validation
  â”œâ”€ Modal VIBRANT test pour chaque projet
  â”œâ”€ Affichage score temps rÃ©el pendant test
  â”œâ”€ Page Projet Signature si validation rÃ©ussie
  â””â”€ Comparaison projets Ã©valuÃ©s
```

#### Livrables Batch 4
- Test VIBRANT fonctionnel pour validation projets
- GÃ©nÃ©ration automatique Projet Signature
- Interface comparative projets Ã©valuÃ©s
- Tests : validation cohÃ©rente avec profil utilisateur

---

## ğŸš€ **Phase 2 : Ã‰volution Sweet Spot** (Batchs 5-6 si MVP rÃ©ussi)

### **Batch 5 : Sweet Spot Engine + IA GÃ©nÃ©rative**
**Objectif** : Activation des moteurs avancÃ©s sur les fondations solides

#### Ã‰volutions Naturelles
```
â–¡ Enrichissement Moteurs Existants
  â”œâ”€ qcm-engine.ts â†’ ajout 2 questions qualitatives + extraction keywords
  â”œâ”€ profile-builder.ts â†’ calcul convergences + Sweet Spot Score
  â”œâ”€ synthesis-engine.ts â†’ remplacement bouchons par Claude API
  â””â”€ Aucune modification base de donnÃ©es (JSONB flexible)

â–¡ Sweet Spot Engine Activation
  â”œâ”€ DÃ©tection convergences inter-dimensions
  â”œâ”€ GÃ©nÃ©ration projets hybrides IA
  â”œâ”€ Animation "moment magique"
  â””â”€ Tout stockÃ© dans JSONB existant

â–¡ Interface Ã‰voluÃ©e
  â”œâ”€ Canvas IkigaÃ¯ avec visualisation convergences
  â”œâ”€ Laboratoire projets avec mÃ©tiers innovants
  â””â”€ Animations et UX sophistiquÃ©es
```

### **Batch 6 : Test VIBRANT + Projet Signature**
**Objectif** : Validation sophistiquÃ©e et gÃ©nÃ©ration manifesto personnel

#### Ajouts Finaux
```
â–¡ Test VIBRANT 7 Dimensions
  â”œâ”€ Ã‰valuation projets gÃ©nÃ©rÃ©s par IA
  â”œâ”€ Scoring sophistiquÃ© forces/faiblesses
  â””â”€ Stockage JSONB : { "projects": {...}, "vibrant": {...} }

â–¡ Projet Signature Automatique
  â”œâ”€ GÃ©nÃ©ration formule personnelle
  â”œâ”€ Manifesto + stratÃ©gie 3 chemins
  â”œâ”€ Export PDF "Sweet Spot Report" enrichi
  â””â”€ Tout basÃ© sur donnÃ©es JSONB accumulÃ©es

â–¡ Access Control Freemium
  â”œâ”€ Ã‰volution access-control.ts pour modÃ¨le Ã  crÃ©dits
  â”œâ”€ Limitation Sweet Spot pour version gratuite
  â””â”€ Aucune modification architecture globale
```

---

## ğŸ¯ **Avantages de l'Approche MVP Ã‰volutif**

### **MVP Batch 1-4 : ImmÃ©diatement Viable**
- âœ… **Fonctionnel complet** : SJT + Canvas + Formations + PFM + Export
- âœ… **Valeur utilisateur dÃ©montrÃ©e** : Aide concrÃ¨te orientation
- âœ… **Monetisable** : 49,99â‚¬ justifiÃ©s par la personnalisation
- âœ… **Rapide Ã  dÃ©velopper** : 4 semaines vs 7 initialement

### **Phase 2 Batch 5-6 : Ã‰volution Sans Douleur**
- âœ… **Aucun refactoring** : Architecture JSONB + moteurs isolÃ©s
- âœ… **Enrichissement progressif** : Chaque moteur Ã©volue indÃ©pendamment
- âœ… **Aucune migration donnÃ©es** : JSONB absorbe toute complexitÃ© future
- âœ… **DiffÃ©renciation concurrentielle** : Sweet Spot devient la killer feature

### **Gestion Risques OptimisÃ©e**
- ğŸ›¡ï¸ **MVP viable mÃªme si Phase 2 Ã©choue** : Produit complet en 4 semaines
- ğŸ›¡ï¸ **Chaque batch livrable** : Validation continue utilisateurs
- ğŸ›¡ï¸ **ComplexitÃ© IA isolÃ©e** : En Phase 2 seulement, pas critique MVP
- ğŸ›¡ï¸ **Pas de dette technique** : Architecture future-proof dÃ¨s le dÃ©but

---

## ğŸ“Š **Planning RÃ©visÃ© Ultra RÃ©aliste**

**MVP (Batch 1-4)** : 4 semaines â†’ **PRODUIT COMPLET VENDABLE**
**Phase 2 (Batch 5-6)** : 3 semaines â†’ **DIFFÃ‰RENCIATION SWEET SPOT**

**Effort MVP** : ~30h/semaine (raisonnable)
**Validation marchÃ©** : AprÃ¨s batch 4 (MVP complet)
**DÃ©clenchement Phase 2** : Si 50+ clients payants MVP

## CRUCIAL : PAS DE DONNÃ‰ES BIDON / pas de solution de repli
## RÃˆGLES CRUCIALES - Ã€ LIRE EN PREMIER

CONTEXTE : Le dÃ©veloppeur prÃ©cÃ©dent a Ã©tÃ© licenciÃ© pour avoir ignorÃ© le code existant et crÃ©Ã© des doublons. Tu dois prouver que tu peux travailler dans l'architecture existante.
 
1. **TOUJOURS lire instructions.doc.instructions.md** avant TOUT travail
2. **TOUJOURS chercher dans les fichiers de la base de code** Ã€ CHAQUE FOIS avant de continuer
3. **TOUJOURS suivre le workflow** : ANALYSER â†’ RÃ‰UTILISER â†’ VALIDER â†’ INTÃ‰GRER
4. **TOUJOURS suivre** : Recherche â†’ Planification â†’ Mise en Å“uvre (JAMAIS passer directement au code)
5. **TOUJOURS modifier** le code avec une prÃ©cision chirurgicale
